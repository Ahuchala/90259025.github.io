import{addTemporaryListener}from"../src/main.min.js";import{Applet}from"./applet.min.js";class AnimationFrameApplet extends Applet{needNewFrame=!0;animationPaused=!1;constructor(canvas){super(canvas)}prepareFrame(){}drawFrame(){}lastTimestamp=-1;drawFrameLoop(timestamp){var e=timestamp-this.lastTimestamp;-1===this.lastTimestamp?(this.lastTimestamp=timestamp,requestAnimationFrame(this.drawFrameLoopBound)):(this.lastTimestamp=timestamp,0==e||(this.prepareFrame(e),this.needNewFrame&&(this.needNewFrame=!1,this.drawFrame(e)),this.animationPaused)||requestAnimationFrame(this.drawFrameLoopBound))}drawFrameLoopBound=this.drawFrameLoop.bind(this);pause(){this.animationPaused=!0}resume(){this.animationPaused=!1,this.needNewFrame=!0,requestAnimationFrame(this.drawFrameLoopBound)}pauseWhenOffscreen(){var e=()=>{var e=this.canvas.getBoundingClientRect(),a=e.top;-e.height<=a&&a<window.innerHeight?this.resume():this.pause()};addTemporaryListener({object:window,event:"scroll",callback:e}),e()}}export{AnimationFrameApplet};