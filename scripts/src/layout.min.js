import{setBannerMaxScroll}from"./banners.min.js";import{currentCard,resizeCard}from"./cards.min.js";import{headerElement}from"./header.min.js";import{$,$$,pageElement}from"./main.min.js";const pageWidth=1150;let aspectRatio=window.innerWidth/window.innerHeight,navigationAnimationDistanceVertical=Math.min(window.innerHeight/20,25),navigationAnimationDistanceHorizontal=Math.min(window.innerWidth/20,25),appletColumnsAreEqualized=!1;const heightMeasurerElement=document.body.querySelector("#height-measurer");let viewportHeight=heightMeasurerElement?100*heightMeasurerElement.getBoundingClientRect().height:window.innerHeight;const likelyWindowChromeHeight=viewportHeight-window.innerHeight;function onResize(){viewportHeight=heightMeasurerElement?100*heightMeasurerElement.getBoundingClientRect().height-likelyWindowChromeHeight:window.innerHeight,setBannerMaxScroll(Math.min(viewportHeight-40-(headerElement?headerElement.offsetHeight:0),document.body.offsetHeight-window.innerHeight)),navigationAnimationDistanceVertical=Math.min(window.innerHeight/20,25),navigationAnimationDistanceHorizontal=Math.min(window.innerWidth/20,25),1<(aspectRatio=window.innerWidth/window.innerHeight)&&!appletColumnsAreEqualized?equalizeAppletColumns():aspectRatio<=1&&appletColumnsAreEqualized&&destroyAppletColumns(),resizeCard();const e=headerElement?.children[0]?.children[0];e&&(e.style.width=e.getBoundingClientRect().height+"px");var i,t,n=$$(".one-image-link .image-link"),a=$(".image-links:not(.one-image-link) .image-link");if(!a){const e=document.createElement("div");e.classList.add("image-links"),e.style.opacity=0,e.style.marginTop=0,pageElement.appendChild(e),(a=document.createElement("div")).classList.add("image-link"),e.appendChild(a)}if(n.length){const l=$(".image-links:not(.one-image-link) .image-link").getBoundingClientRect().width;n.forEach(element=>{element.style.width=l+"px"})}currentCard&&(a=currentCard.querySelector("img"))&&(n=currentCard.getBoundingClientRect().height,i=a.getBoundingClientRect().height,t=window.innerWidth<=500?8:16,a.style.maxHeight=`calc(100vh - ${n-i+2*t}px)`)}function initOnResize(){window.addEventListener("resize",onResize)}function equalizeAppletColumns(){if(!(aspectRatio<1||window.innerWidth<750)){var l=$("#canvas-landscape-left"),o=$("#canvas-landscape-right");if(l&&o){var r=[],h=l.children.length,d=o.children.length;for(let e=0;e<h;e++)r.push(l.children[e]);for(let n=0;n<d;n++)r.push(o.children[n]);var s=[r[0].clientHeight];for(let a=1;a<r.length;a++)s.push(s[a-1]+r[a].clientHeight);let i=1/0,t=0;if(1<r.length)for(let e=0;e<r.length;e++){var g=Math.abs(s[e]-(s[s.length-1]-s[e]));g<i&&(i=g,t=e+1)}if(t<h){var m=[];for(let e=t;e<h;e++)l.children[e].classList.add("moved-to-right"),m.push(l.children[e]);for(let i=m.length-1;0<=i;i--)o.insertBefore(m[i],o.firstElementChild)}else{var c=[];for(let e=0;e<t-h;e++)o.children[e].classList.add("moved-to-left"),c.push(o.children[e]);for(let i=0;i<c.length;i++)l.appendChild(c[i])}appletColumnsAreEqualized=!0}}}function destroyAppletColumns(){var n=$("#canvas-landscape-left"),a=$("#canvas-landscape-right");if(n&&a){let e=$$(".moved-to-left");for(let i=e.length-1;0<=i;i--)a.insertBefore(e[i],a.firstElementChild),e[i].classList.remove("moved-to-left");e=$$(".moved-to-right");for(let t=0;t<e.length;t++)n.appendChild(e[t]),e[t].classList.remove("moved-to-right");appletColumnsAreEqualized=!1}}export{pageWidth,aspectRatio,navigationAnimationDistanceVertical,navigationAnimationDistanceHorizontal,viewportHeight,likelyWindowChromeHeight,onResize,initOnResize,equalizeAppletColumns};