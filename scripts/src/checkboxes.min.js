import{InputElement}from"./inputElement.min.js";import{addTemporaryParam,pageUrl}from"./main.min.js";class Checkbox extends InputElement{checked;persistState;constructor({element,name,persistState=!0,checked=!1,onInput=()=>{}}){var e;super({element:element,name:name}),this.checked=checked,this.onInput=onInput,this.element.parentNode.nextElementSibling.firstElementChild.textContent=this.name,this.persistState=persistState,this.element.checked=this.checked,this.element.addEventListener("input",()=>{this.element.blur(),this.disabled?this.element.checked=!this.element.checked:this.setChecked({newChecked:this.element.checked,callOnInput:!0})}),this.element.parentNode.addEventListener("click",()=>{this.checked===this.element.checked&&this.element.click()}),this.persistState&&("1"===(e=new URLSearchParams(window.location.search).get(this.element.id))?setTimeout(()=>{this.setChecked({newChecked:!0,callOnInput:!0})},10):"0"===e&&setTimeout(()=>{this.setChecked({newChecked:!1,callOnInput:!0})},10),addTemporaryParam(this.element.id))}setChecked({newChecked,callOnInput=!1}){var e;this.element.checked=newChecked,this.checked=newChecked,callOnInput&&this.onInput(),this.persistState&&((e=new URLSearchParams(window.location.search)).set(this.element.id,this.checked?"1":"0"),e=e.toString(),window.history.replaceState({url:pageUrl},"",pageUrl.replace(/\/home\//,"/")+(e?"?"+e:"")))}setDisabled(newDisabled){this.disabled=newDisabled,this.disabled?this.element.parentNode.parentNode.classList.add("disabled"):this.element.parentNode.parentNode.classList.remove("disabled")}}export{Checkbox};