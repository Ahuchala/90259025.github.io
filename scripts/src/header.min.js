import anime from"../anime.min.js";import{Checkbox}from"./checkboxes.min.js";import{addHoverEvent,addHoverEventWithScale}from"./hoverEvents.min.js";import{redirect}from"./navigation.min.js";import{siteSettings,toggleDarkTheme,toggleIncreaseContrast,toggleReduceMotion}from"./settings.min.js";let headerElement,accessibilityTooltipElement,darkThemeCheckbox,reduceMotionCheckbox,increaseContrastCheckbox,accessibilityDialogOpen=!1,accessibilityDialogAnimating=!1;function addHeader(){document.body.firstChild.insertAdjacentHTML("beforebegin",`
		<div id="header-container" style="opacity: 0"></div>
		
		<div id="header" style="opacity: 0">
			<a id="header-logo" href="/home/">
				<img src="/graphics/header-icons/logo.webp" alt="Cruz Godar"></img>
				<span>Cruz Godar</span>
			</a>
			
			<div id="header-links">
				<a id="header-gallery-link" href="/gallery/">
					<span>Gallery</span>
					<img src="/graphics/header-icons/gallery.webp"></img>
				</a>
				
				<a id="header-applets-link" href="/applets/">
					<span>Applets</span>
					<img src="/graphics/header-icons/applets.webp"></img>
				</a>
				
				<a id="header-teaching-link" href="/teaching/">
					<span>Teaching</span>
					<img src="/graphics/header-icons/teaching.webp"></img>
				</a>
				
				<a id="header-slides-link" href="/slides/">
					<span>Slides</span>
					<img src="/graphics/header-icons/slides.webp"></img>
				</a>
				
				<a id="header-writing-link" href="/writing/">
					<span>Writing</span>
					<img src="/graphics/header-icons/writing.webp"></img>
				</a>
				
				<a id="header-about-link" href="/about/">
					<span>About</span>
					<img src="/graphics/header-icons/about.webp"></img>
				</a>
			</div>

			<div id="header-settings-button">
				<input type="image" src="/graphics/header-icons/gear.webp" alt="Settings" class="keep-accessibility-dialog-open">
			</div>
		</div>

		<div id="accessibility-tooltip" class="keep-accessibility-dialog-open">
			<h2 class="section-text keep-accessibility-dialog-open">Site Settings</h2>
			
			<div class="checkboxes keep-accessibility-dialog-open">
				<div class="checkbox-row keep-accessibility-dialog-open">
					<div class="checkbox-container keep-accessibility-dialog-open" tabindex="1">
						<input type="checkbox" id="dark-theme-checkbox" class="keep-accessibility-dialog-open">
						<div class="checkbox keep-accessibility-dialog-open"></div>
					</div>
					<label for="dark-theme-checkbox" style="margin-left: 10px" class="keep-accessibility-dialog-open">
						<p class="body-text checkbox-subtext keep-accessibility-dialog-open"></p>
					</label>
				</div>
			</div>

			<div class="checkboxes keep-accessibility-dialog-open">
				<div class="checkbox-row keep-accessibility-dialog-open">
					<div class="checkbox-container keep-accessibility-dialog-open" tabindex="1">
						<input type="checkbox" id="reduce-motion-checkbox" class="keep-accessibility-dialog-open">
						<div class="checkbox keep-accessibility-dialog-open"></div>
					</div>
					<label for="reduce-motion-checkbox" style="margin-left: 10px" class="keep-accessibility-dialog-open">
						<p class="body-text checkbox-subtext keep-accessibility-dialog-open"></p>
					</label>
				</div>
			</div>

			<div class="checkboxes keep-accessibility-dialog-open">
				<div class="checkbox-row keep-accessibility-dialog-open">
					<div class="checkbox-container keep-accessibility-dialog-open" tabindex="1">
						<input type="checkbox" id="increase-contrast-checkbox" class="keep-accessibility-dialog-open">
						<div class="checkbox keep-accessibility-dialog-open"></div>
					</div>
					<label for="increase-contrast-checkbox" style="margin-left: 10px" class="keep-accessibility-dialog-open">
						<p class="body-text checkbox-subtext keep-accessibility-dialog-open"></p>
					</label>
				</div>
			</div>
		</div>
	`),setTimeout(()=>{var e=document.body.querySelector("#header-logo img"),e=(e.style.width=e.getBoundingClientRect().height+"px",document.body.querySelectorAll("#header-logo, #header-links a").forEach(link=>{var i="header-logo"===link.id?()=>window.innerWidth<=700:()=>window.innerWidth<=550;addHoverEvent({element:link,addBounceOnTouch:i});const t=link.getAttribute("href");link.setAttribute("href","/index.html?page="+encodeURIComponent(t)),link.addEventListener("click",e=>{e.preventDefault(),redirect({url:t,inNewTab:e.metaKey})})}),document.body.querySelector("#header-settings-button"));addHoverEvent({element:e,addBounceOnTouch:()=>!0}),e.addEventListener("click",e=>{e.preventDefault(),(accessibilityDialogOpen?hideAccessibilityDialog:showAccessibilityDialog)()}),accessibilityTooltipElement=document.body.querySelector("#accessibility-tooltip"),document.documentElement.addEventListener("pointerdown",e=>{accessibilityDialogOpen&&!e.target.classList.contains("keep-accessibility-dialog-open")&&hideAccessibilityDialog()}),darkThemeCheckbox=new Checkbox({element:document.body.querySelector("#dark-theme-checkbox"),name:"Dark theme",checked:siteSettings.darkTheme,persistState:!1,onInput:()=>toggleDarkTheme({})}),addHoverEventWithScale({element:darkThemeCheckbox.element.parentNode,scale:1.1,addBounceOnTouch:()=>!0}),reduceMotionCheckbox=new Checkbox({element:document.body.querySelector("#reduce-motion-checkbox"),name:"Reduce motion",checked:siteSettings.reduceMotion,persistState:!1,onInput:()=>toggleReduceMotion()}),addHoverEventWithScale({element:reduceMotionCheckbox.element.parentNode,scale:1.1,addBounceOnTouch:()=>!0}),increaseContrastCheckbox=new Checkbox({element:document.body.querySelector("#increase-contrast-checkbox"),name:"Increase contrast",checked:siteSettings.increaseContrast,persistState:!1,onInput:()=>toggleIncreaseContrast({})}),addHoverEventWithScale({element:increaseContrastCheckbox.element.parentNode,scale:1.1,addBounceOnTouch:()=>!0}),headerElement=document.body.querySelector("#header")})}async function showAccessibilityDialog(){accessibilityDialogAnimating||(accessibilityDialogAnimating=!0,accessibilityDialogOpen=!0,accessibilityTooltipElement.style.transform=siteSettings.reduceMotion?"scale(1)":"translateX(8px) translateY(-8px) scale(.95)",accessibilityTooltipElement.style.display="block",await anime({targets:accessibilityTooltipElement,opacity:1,scale:1,translateX:0,translateY:0,duration:150,easing:"easeOutQuad"}).finished,accessibilityDialogAnimating=!1)}async function hideAccessibilityDialog(){accessibilityDialogAnimating||(accessibilityDialogAnimating=!0,accessibilityDialogOpen=!1,await anime({targets:accessibilityTooltipElement,opacity:0,scale:siteSettings.reduceMotion?1:.95,translateX:siteSettings.reduceMotion?0:8,translateY:siteSettings.reduceMotion?0:-8,duration:150,easing:"easeOutQuad"}).finished,accessibilityTooltipElement.style.display="none",accessibilityDialogAnimating=!1)}export{headerElement,darkThemeCheckbox,reduceMotionCheckbox,increaseContrastCheckbox,addHeader};