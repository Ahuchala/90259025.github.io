import{cardIsOpen}from"./cards.min.js";import{pageElement}from"./main.min.js";import anime from"/scripts/anime.min.js";function typesetMath(){if(!window.OFFLINE)return MathJax.typesetPromise()}async function showTex(element){if(cardIsOpen&&"1"!==element.getAttribute("data-showing-tex")){element.setAttribute("data-showing-tex","1"),element.classList.remove("active"),element.classList.remove("hover"),await anime({targets:element,scale:1,borderRadius:"0px",duration:0}).finished;var n=element.getAttribute("data-source-tex").replaceAll(/\[NEWLINE\]/g,"\n").replaceAll(/\[TAB\]/g,"\t"),l=element.getBoundingClientRect().height,i=element.getBoundingClientRect().width;const s=element.style.padding,a=document.createElement("div");a.style.display="none",pageElement.appendChild(a),a.appendChild(element.firstElementChild);let e,t;-1!==n.indexOf("\n")?((t=document.createElement("div")).style.display="flex",t.style.justifyContent="center",t.style.width="100%",t.style.height=l-1+"px",(e=document.createElement("textarea")).textContent=n,e.style.height="100%",e.style.width=i-30+"px",e.style.margin="0 auto"):((e=document.createElement("input")).setAttribute("type","text"),e.setAttribute("value",n),e.style.height=l-6+"px",e.style.width=i-8+"px"),e.style.fontFamily="'Source Code Pro', monospace",(t?(element.appendChild(t),t):element).appendChild(e),element.style.padding=0,e.select(),setTimeout(()=>e.select(),50),setTimeout(()=>e.select(),250),e.onblur=()=>{e.remove(),t&&t.remove(),element.style.removeProperty("width"),element.style.padding=s,element.appendChild(a.firstElementChild),element.style.minHeight="",a.remove(),element.setAttribute("data-showing-tex","0"),element.classList.add("active")}}}export{typesetMath,showTex};