import{cubeAndSpongeBuilds}from"./builds/cubeAndSponge.min.js";import{curvedSpaceBuilds}from"./builds/curvedSpace.min.js";import{e3Builds}from"./builds/e3.min.js";import{foldingSpaceBuilds}from"./builds/foldingSpace.min.js";import{groundAndSphereBuilds}from"./builds/groundAndSphere.min.js";import{h2xeBuilds}from"./builds/h2xe.min.js";import{kIFSBuilds}from"./builds/kIFS.min.js";import{lightingBuilds}from"./builds/lighting.min.js";import{mandelbulbBuilds}from"./builds/mandelbulb.min.js";import{qJuliaBuilds}from"./builds/qJulia.min.js";import{shadowsBuilds}from"./builds/shadows.min.js";import{sl2rBuilds}from"./builds/sl2r.min.js";import{sphereAndCubeBuilds}from"./builds/sphereAndCube.min.js";import{titleBuilds}from"./builds/title.min.js";import{ThurstonGeometries}from"/applets/thurston-geometries/scripts/class.min.js";import Lapsa from"/scripts/lapsa.min.js";import{changeOpacity}from"/scripts/src/animation.min.js";const canvasBundle=document.body.querySelector("#canvas-bundle"),outputCanvas=document.body.querySelector("#output-canvas");let uniformLoop=[];function addUniformLoop(newUniformLoop){uniformLoop.push(newUniformLoop)}let applet;async function initializeApplet({Class,parameters={},slide,duration,resolution=1e3}){await changeOpacity({element:canvasBundle,opacity:0,duration:duration/2}),applet?.destroy&&applet.destroy(),slide.appendChild(canvasBundle),applet=new Class({canvas:outputCanvas,...parameters}),requestAnimationFrame(()=>{applet.wilson.resizeCanvas({width:resolution}),applet.wilson.resizeWorld({width:2.5}),applet instanceof ThurstonGeometries||applet.wilson.setUniforms({aspectRatio:[95/55.625,1]})}),document.body.querySelectorAll(".WILSON_draggables-container").forEach(element=>element.classList.add("lapsa-interactable")),changeOpacity({element:canvasBundle,opacity:1,duration:duration/2})}const options={shelfIconPaths:"/graphics/lapsa-icons/",builds:{title:titleBuilds,"ground-and-sphere":groundAndSphereBuilds,lighting:lightingBuilds,shadows:shadowsBuilds,"folding-space":foldingSpaceBuilds,"sphere-and-cube":sphereAndCubeBuilds,"cube-and-sponge":cubeAndSpongeBuilds,kifs:kIFSBuilds,mandelbulb:mandelbulbBuilds,qjulia:qJuliaBuilds,"curved-space":curvedSpaceBuilds,e3:e3Builds,h2xe:h2xeBuilds,sl2r:sl2rBuilds},setupBuild:()=>{uniformLoop.forEach(uniformLoop=>uniformLoop?.pause&&uniformLoop.pause()),uniformLoop=[],applet?.pause&&applet.pause(),applet&&(applet.animationPaused=!0)}};new Lapsa(options);export{canvasBundle,uniformLoop,addUniformLoop,applet,initializeApplet};