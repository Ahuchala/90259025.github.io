import{showPage}from"../../../scripts/src/loadPage.min.js";import{GameOfLife}from"./class.min.js";import{acorn}from"./startingStates/acorn.min.js";import{expansion}from"./startingStates/expansion.min.js";import{gliderGun}from"./startingStates/gliderGun.min.js";import{grayship}from"./startingStates/grayship.min.js";import{infiniteGrowth}from"./startingStates/infiniteGrowth.min.js";import{puffer}from"./startingStates/puffer.min.js";import{random}from"./startingStates/random.min.js";import{rocket}from"./startingStates/rocket.min.js";import{spaceshipFactory}from"./startingStates/spaceshipFactory.min.js";import{verticalLine}from"./startingStates/verticalLine.min.js";import{Button,DownloadButton}from"/scripts/src/buttons.min.js";import{Checkbox}from"/scripts/src/checkboxes.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";export default function(){const r=new GameOfLife({canvas:$("#output-canvas")}),n=new TextBox({element:$("#resolution-input"),name:"Resolution",value:1e3,minValue:500,maxValue:4e3,onEnter:t,onInput:function(){r.resolution=Math.max(n.value*siteSettings.resolutionMultiplier,2*r.gridSize),r.wilson.resizeCanvas({width:r.resolution})}}),i=new TextBox({element:$("#grid-size-input"),name:"Grid Size",value:200,minValue:10,maxValue:1500,onEnter:t}),e=new Slider({element:$("#speed-slider"),name:"Speed",value:4,min:1,max:200,logarithmic:!0,integer:!0,onInput:function(){r.framesPerUpdate=Math.ceil(40/e.value),r.updatesPerFrame=Math.ceil(e.value/40)}}),o=(new Button({element:$("#start-button"),name:"Start",onClick:()=>{r.pauseUpdating?r.resumeUpdating():t(!1)}}),new DownloadButton({element:$("#download-button"),applet:r,filename:"a-game-of-life.png"}),new Checkbox({element:$("#torus-checkbox"),name:"Loop on boundary",onInput:function(){r.onTorus=o.checked,r.wilsonHidden.setUniforms({onTorus:o.checked?1:0})}})),s=new Dropdown({element:$("#starting-states-dropdown"),name:"Starting States",options:{random:"Random",verticalLine:"Vertical Line",acorn:"Acorn",infiniteGrowth:"Square Builder",gliderGun:"Glider Gun",puffer:"Puffer",expansion:"Infinite Growth",rocket:"Rocket",grayship:"Grayship",spaceshipFactory:"Spaceship Factory"},onInput:t}),a={"":random,random:random,verticalLine:verticalLine,acorn:acorn,infiniteGrowth:infiniteGrowth,gliderGun:gliderGun,puffer:puffer,expansion:expansion,rocket:rocket,grayship:grayship,spaceshipFactory:spaceshipFactory};function t(pauseUpdating=!0){var[e,t]=(0,a[s.value])(i.value);i.setValue(t),r.run({resolution:n.value*siteSettings.resolutionMultiplier,gridSize:t,state:e,pauseUpdating:pauseUpdating,onTorus:o.checked})}showPage(),t()}