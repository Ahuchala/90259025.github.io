import{showPage}from"../../../scripts/src/loadPage.min.js";import{KaleidoscopicIFSFractals}from"./class.min.js";import{getRotationMatrix}from"/scripts/applets/raymarchApplet.min.js";import{DownloadButton}from"/scripts/src/buttons.min.js";import{Checkbox}from"/scripts/src/checkboxes.min.js";import{Dropdown}from"/scripts/src/dropdowns.min.js";import{$}from"/scripts/src/main.min.js";import{typesetMath}from"/scripts/src/math.min.js";import{siteSettings}from"/scripts/src/settings.min.js";import{Slider}from"/scripts/src/sliders.min.js";import{TextBox}from"/scripts/src/textBoxes.min.js";const minScale=1.125,minScaleEpsilon=3e-5,maxScaleEpsilon=3e-7;export default function(){const e=new TextBox({element:$("#resolution-input"),name:"Resolution",value:500,minValue:100,maxValue:1e3,onInput:function(){c.wilson.resizeCanvas({width:e.value*siteSettings.resolutionMultiplier})}}),o=new Slider({element:$("#rotation-angle-x-slider"),name:"$\\theta_x$",value:0,min:0,max:2*Math.PI,onInput:m}),t=new Slider({element:$("#rotation-angle-y-slider"),name:"$\\theta_y$",value:0,min:0,max:2*Math.PI,onInput:m}),a=new Slider({element:$("#rotation-angle-z-slider"),name:"$\\theta_z$",value:0,min:0,max:2*Math.PI,onInput:m}),n=new Dropdown({element:$("#polyhedra-dropdown"),name:"Polyhedra",options:{tetrahedron:"Tetrahedron",cube:"Cube",octahedron:"Octahedron",dodecahedron:"Dodecahedron",icosahedron:"Icosahedron"},onInput:function(){c.changePolyhedron(n.value)}}),i=new Slider({element:$("#scale-slider"),name:"Scale",value:2,min:minScale,max:8/3,onInput:m}),s=new Checkbox({element:$("#lock-on-origin-checkbox"),name:"Lock on origin",checked:!0,onInput:p}),r=new Checkbox({element:$("#shadows-checkbox"),name:"Shadows",onInput:p}),l=new Checkbox({element:$("#antialiasing-checkbox"),name:"Antialiasing",onInput:p}),c=new KaleidoscopicIFSFractals({canvas:$("#output-canvas"),shape:n.value||"octahedron"});function m(){var e=(i.value-minScale)/(2-minScale)*Math.log10(minScaleEpsilon/maxScaleEpsilon),n=Math.floor(44-12*(i.value-8/3)/(8/3-2));c.setUniforms({scale:i.value,minEpsilon:minScaleEpsilon/Math.pow(10,e),numIterations:n,rotationMatrix:getRotationMatrix(o.value,t.value,a.value)})}function p(){c.setLockedOnOrigin(s.checked),c.useShadows===r.checked&&c.useAntialiasing===l.checked||(c.useShadows=r.checked,c.useAntialiasing=l.checked,c.reloadShader())}new DownloadButton({element:$("#download-button"),applet:c,filename:"a-kaleidoscopic-ifs-fractal.png"}),typesetMath(),showPage()}