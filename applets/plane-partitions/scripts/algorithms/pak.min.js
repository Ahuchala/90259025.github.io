async function pak(index){const n=this.arrays[index],a=n.numbers;this.in2dView||await this.show2dView();let t=0,i=0;for(;t<n.footprint&&0!==n.numbers[t][n.footprint-1];)t++;for(;i<n.footprint&&0!==n.numbers[n.footprint-1][i];)i++;t=0;let h=i=0;for(let o=n.footprint-1-i;0<=o;o--)for(let e=n.footprint-1-t;0<=e;e--)a[o][e]!==1/0&&h++;let l=0;for(let c=0;c<n.footprint-i;c++)for(let s=0;s<n.footprint-t;s++)if(a[c][s]!==1/0){var d=[];let t=0;for(;c+t<n.footprint&&s+t<n.footprint;)d.push([c+t,s+t,a[c+t][s+t]-1]),t++;t=d[0][0];let i=d[0][1],e=[];for(let o=a[t][i]-2;0<=o;o--)e.push([t,i,o]);this.colorCubes(n,e,l/h*6/7),e=[],d.forEach(coordinate=>{0<=coordinate[2]&&e.push(coordinate)}),await this.colorCubes(n,e,l/h*6/7);const p=new Array(d.length);d.forEach((coordinate,index)=>{var e=coordinate[0],t=coordinate[1];let i=0,o=0;e<n.footprint-1&&(i=a[e+1][t]),t<n.footprint-1&&(o=a[e][t+1]),p[index]=Math.max(i,o),0<index?(i=a[e-1][t],o=a[e][t-1],p[index]+=Math.min(i,o)-a[e][t]):p[index]=a[e][t]-p[index]});for(let r=0;r<d.length;r++){if(t=d[r][0],i=d[r][1],p[r]>a[t][i]){var f=[];for(let e=a[t][i];e<p[r];e++)n.cubes[t][i][e]=this.addCube(n,i,e,t),f.push([t,i,e]);this.in2dView?this.revealCubes(n,f):await this.revealCubes(n,f)}else if(p[r]<a[t][i]){var u=[];for(let e=a[t][i]-1;e>=p[r];e--)u.push([t,i,e]);this.in2dView?this.deleteCubes(n,u):await this.deleteCubes(n,u)}a[t][i]=p[r],this.in2dView&&this.drawSingleCell2dViewText(n,t,i)}const w=[];e.forEach((coordinate,index)=>{0!==index&&coordinate[2]<a[coordinate[0]][coordinate[1]]&&w.push(coordinate)}),this.in2dView?this.uncolorCubes(n,w):await this.uncolorCubes(n,w),l++,this.recalculateHeights(n),0!==e.length&&await new Promise(resolve=>setTimeout(resolve,this.animationTime))}this.updateCameraHeight(!0)}async function pakInverse(index,rightLegSize=0,bottomLegSize=0){const s=this.arrays[index],n=s.numbers;this.in2dView||await this.show2dView();let a=0;for(let t=s.footprint-1-bottomLegSize;0<=t;t--)for(let e=s.footprint-1-rightLegSize;0<=e;e--)n[t][e]!==1/0&&a++;let h=0;for(let c=s.footprint-1-bottomLegSize;0<=c;c--)for(let e=s.footprint-1-rightLegSize;0<=e;e--)if(n[c][e]!==1/0){var l=[];let t=0;for(;c+t<s.footprint&&e+t<s.footprint;)l.push([c+t,e+t,n[c+t][e+t]-1]),t++;t=l[0][0];let i=l[0][1];const p=new Array(l.length);let r=!1;if(l.forEach((coordinate,index)=>{var e=coordinate[0],t=coordinate[1];let i=0,o=0;e<s.footprint-1&&(i=n[e+1][t]),t<s.footprint-1&&(o=n[e][t+1]),p[index]=Math.max(i,o),0<index?(i=n[e-1][t],o=n[e][t-1],p[index]+=Math.min(i,o)-n[e][t]):p[index]+=n[e][t],r||p[index]===n[e][t]||(r=!0)}),0!==n[t][i]){var d=[];for(let e=n[t][i]-1;0<=e;e--)d.push([t,i,e]);this.colorCubes(s,d,h/a*6/7)}else if(0!==p[0])s.cubes[t][i][0]=this.addCube(s,i,0,t,h/a*6/7,1,this.cubeLightness),n[t][i]=1,this.revealCubes(s,[[t,i,0]]);else if(!r){h++;continue}await new Promise(resolve=>setTimeout(resolve,this.animationTime));for(let o=0;o<l.length;o++){if(t=l[o][0],i=l[o][1],p[o]>n[t][i]){var f=[];for(let e=n[t][i];e<p[o];e++)s.cubes[t][i][e]=this.addCube(s,i,e,t,h/a*6/7,1,this.cubeLightness),f.push([t,i,e]);this.in2dView?this.revealCubes(s,f):await this.revealCubes(s,f)}else if(p[o]<n[t][i]){var u=[];for(let e=n[t][i]-1;e>=p[o];e--)u.push([t,i,e]);this.in2dView?this.deleteCubes(s,u):await this.deleteCubes(s,u)}n[t][i]=p[o],this.in2dView&&this.drawSingleCell2dViewText(s,t,i)}h++,this.recalculateHeights(s),await new Promise(resolve=>setTimeout(resolve,this.animationTime))}this.updateCameraHeight(!0)}export{pak,pakInverse};